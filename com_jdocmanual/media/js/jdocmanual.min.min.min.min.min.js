function setCookie(name,value,days){let expires="";let date=new Date;let paths=Joomla.getOptions(["system.paths"],"No good");let root=paths.root?paths.root:"/";let path="; path="+root;const samesite="; samesite=None; secure=true";let baseFull=paths.baseFull;if(days){date.setTime(date.getTime()+days*24*60*60*1e3)}else{date.setTime(date.getTime())}expires="; expires="+date.toGMTString();document.cookie=name+"="+value+expires+path+samesite}function getCookie(name){let nameEQ=name+"=";let ca=document.cookie.split(";");for(let i=0;i<ca.length;i+=1){let c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length)}}return null}function eraseCookie(name){setCookie(name,"",0)}let toggle=document.getElementById("toggle-joomla-menu");if(toggle){toggle.addEventListener("click",function(){let wrapper=document.getElementById("sidebar-wrapper");let style=getComputedStyle(wrapper);if(style.display==="none"){wrapper.classList.remove("d-none")}else{wrapper.classList.add("d-none")}})}let getPage=function(event){event.preventDefault();let jdmcur=getCookie("jdmcur");let curmanual="user";if(jdmcur){curmanual=jdmcur.split("-")[0]}let url=new URL(this);let paramsString=url.search;let searchParams=new URLSearchParams(paramsString);if(searchParams.get("index_language_code")){location=url;return}if(searchParams.get("page_language_code")){location=url;return}let manual=searchParams.get("manual");let heading="";let filename="";if(!manual){let article=searchParams.get("article");if(article){sp=article.split("/");manual=sp[0];heading=sp[1];filename=sp[2].split(".")[0]+".md"}}else{heading=searchParams.get("heading");filename=searchParams.get("filename")}if(curmanual!==manual||heading===null||filename===null){if(url.href.indexOf("/administrator/")>0){url.href=url.href.replace("/administrator/jdocmanual?","/administrator/index.php?option=com_jdocmanual&view=manual&")}location=url;return}setPanelContent(manual,heading,filename);setlinks()};setlinks();function setlinks(){let links=document.querySelectorAll('a[href*="jdocmanual"]');for(let i=0;i<links.length;i+=1){links[i].addEventListener("click",getPage,false)}}async function setPanelContent(manual,heading,filename){let document_title=document.getElementById("document-title");if(!document_title){return}let index_items=document.getElementsByClassName("article-active");[].forEach.call(index_items,function(el){el.classList.remove("article-active")});let document_panel=document.getElementById("document-panel");document_panel.innerHTML=`<div class="text-center">
    <div class="spinner-border m-5" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    </div>`;let toc_panel=document.getElementById("toc-panel");const token=Joomla.getOptions("csrf.token","");let url="index.php?option=com_jdocmanual&task=content.fillpanel";let data=new URLSearchParams;let new_cookie=heading+"--"+filename;setCookie("jdm"+manual,new_cookie,10);data.append("manual",manual);data.append("heading",heading);data.append("filename",filename);data.append(token,1);const options={body:data,method:"POST"};let response=await fetch(url,options);if(!response.ok){document_panel.innerHTML=response.status;throw new Error(Joomla.Text._("COM_MYCOMPONENT_JS_ERROR_STATUS"))}else{let result=await response.text();let obj=JSON.parse(result);toc_panel.innerHTML=obj[0];document_panel.innerHTML=obj[1];document_title.innerHTML=obj[2];setlinks();menuHighlight(heading,filename);let language=document.getElementById("language").value;setFeedback(manual,language,heading,filename)}}let indexLocation="oncanvas";function setIndexLocation(){const vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);let offcanvasId=document.getElementById("offcanvasMenu");let oncanvasId=document.getElementById("oncanvasMenu");let jdocmanulId=document.getElementById("jdocmanual-wrapper");if(vw<576){if(indexLocation=="oncanvas"){offcanvasId.appendChild(jdocmanulId);indexLocation="offcanvas"}}else{if(indexLocation=="offcanvas"){oncanvasId.appendChild(jdocmanulId);indexLocation="oncanvas"}}}function menuHighlight(heading,filename){filename=filename.replace(".md","");let link=document.querySelector('a[href*="/'+heading+"/"+filename+'"]');if(link){link.parentElement.classList.add("article-active");let currentUL=link.closest("ul");currentUL.classList.add("mm-show");let parent=currentUL.parentElement;while(parent&&parent.tagName.toLowerCase()==="li"){parent.classList.add("mm-active");let parentUL=parent.parentElement;if(parentUL.tagName.toLowerCase()==="ul"){parentUL.classList.add("mm-show")}parent=parentUL.parentElement}const currentUrl=window.location.href;const url=new URL(currentUrl);const highlight=url.searchParams.get("highlight");let jdmcur=getCookie("jdmcur");if(jdmcur){let parts=jdmcur.split("-");let lang=parts[2];let href=link.href.replace("jdocmanual?",lang+"/jdocmanual?");if(highlight){}if(url.href.indexOf("/administrator/")<0){history.replaceState(null,"",href)}}}hljs.highlightAll()}function setFeedback(manual,language,heading,filename){if(document.getElementById("manual")){document.getElementById("manual").value=manual;document.getElementById("language").value=language;document.getElementById("heading").value=heading;document.getElementById("filename").value=filename;document.getElementById("comment").value=""}}document.addEventListener("DOMContentLoaded",function(event){let jdmcur=getCookie("jdmcur");if(jdmcur){let parts=jdmcur.split("-");let manual=parts[0];let handf=getCookie("jdm"+manual).split("--");menuHighlight(handf[0],handf[1]);setIndexLocation();setFeedback(manual,parts[2],handf[0],handf[1])}});window.addEventListener("resize",setIndexLocation);var modalbox=document.getElementById("jdmFeedback");if(modalbox){var modalTitle=modalbox.querySelector(".modal-title");var modalBody=modalbox.querySelector(".modal-body")}var modalsave=document.getElementById("modal-save");modalsave&&modalsave.addEventListener("click",function(event){sendFeedback("alldone")});modalbox&&modalbox.addEventListener("show.bs.modal",function(event){let button=event.relatedTarget;let title=document.getElementById("document-title").innerText;modalTitle.textContent=title;let likeitornot=button.getAttribute("data-bs-id");sendFeedback(likeitornot)});async function sendFeedback(likeitornot){const token=Joomla.getOptions("csrf.token","");let url="index.php?option=com_jdocmanual&task=feedback.likeitornot";let manual=document.getElementById("manual").getAttribute("value");let language=document.getElementById("language").getAttribute("value");let heading=document.getElementById("heading").getAttribute("value");let filename=document.getElementById("filename").getAttribute("value");let comment=document.getElementById("comment");let comment_label=document.getElementById("comment_label");let modalSave=document.querySelector("#modal-save");let data=new URLSearchParams;data.append(`likeitornot`,likeitornot);data.append(`manual`,manual);data.append(`language`,language);data.append(`heading`,heading);data.append(`filename`,filename);data.append(`comment`,comment.value);data.append(token,1);const options={method:"POST",body:data};let response=await fetch(url,options);if(!response.ok){throw new Error(Joomla.Text._("COM_MYCOMPONENT_JS_ERROR_STATUS")+`${response.status}`)}else{let result=await response.json();comment_label.innerText=result.comment_label;comment.value=result.comment;if(result.stage===1){modalSave.classList.remove("hidden")}else{modalSave.classList.add("hidden")}}}async function setModalContent(itemTask,itemId,saveTask){const token=Joomla.getOptions("csrf.token","");let url="index.php?option=com_mycomponent&task="+itemTask;let data=new URLSearchParams;data.append(`itemId`,itemId);data.append(token,1);const options={method:"POST",body:data};let response=await fetch(url,options);if(!response.ok){throw new Error(Joomla.Text._("COM_MYCOMPONENT_JS_ERROR_STATUS")+`${response.status}`)}else{let result=await response.text();let description=document.querySelector(".modal-body");description.innerHTML=result;let modalSave=document.querySelector("#modal-save");if(saveTask){modalSave.setAttribute("saveTask",saveTask);modalSave.classList.remove("hidden")}else{modalSave.classList.add("hidden")}}}